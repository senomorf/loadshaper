# VM.Standard.A1.Flex (1 vCPU, 6GB RAM, 1 Gbps per vCPU)
# Optimized for Ampere with 20% memory rule and higher network capacity

# === Oracle Reclamation Rules ===
# CPU: Uses 95th percentile over 7 days, must stay ABOVE 20%
# Memory: Simple threshold, must stay ABOVE 20% (A1.Flex only)
# Network: Simple threshold, must stay ABOVE 20%

# === P95 CPU Control (Oracle-compliant 7-day window) ===
CPU_P95_TARGET_MIN=22.0
CPU_P95_TARGET_MAX=28.0
CPU_P95_SETPOINT=25.0
CPU_P95_EXCEEDANCE_TARGET=6.5
CPU_P95_BASELINE_INTENSITY=20.0
CPU_P95_HIGH_INTENSITY=40.0
MEM_TARGET_PCT=30                   # 30% = 20% threshold + 10% safety margin for A1.Flex shapes
NET_TARGET_PCT=25                   # 1 Gbps per vCPU (~250 Mbps target)

# === Safety stop thresholds ===
CPU_STOP_PCT=85                     # Higher for dedicated tenancy
MEM_STOP_PCT=90                     # Higher but respects 20% rule
NET_STOP_PCT=60                     # Higher capacity available

# === Control behavior ===
CONTROL_PERIOD_SEC=5
AVG_WINDOW_SEC=300
HYSTERESIS_PCT=5
JITTER_PCT=10                       # Lower jitter for more predictable performance
JITTER_PERIOD_SEC=5

# === Load average monitoring ===
LOAD_THRESHOLD=0.6
LOAD_RESUME_THRESHOLD=0.4
LOAD_CHECK_ENABLED=true

# === Memory safety ===
MEM_MIN_FREE_MB=512
MEM_STEP_MB=128                     # Larger steps with more RAM

# === Network configuration ===
NET_MODE=client
NET_PROTOCOL=udp
NET_PEERS=10.0.0.2,10.0.0.3
NET_PORT=15201
NET_BURST_SEC=10
NET_IDLE_SEC=10

# === Network sensing ===
NET_SENSE_MODE=container
NET_IFACE_INNER=eth0
NET_LINK_MBIT=1000                  # 1 Gbps per vCPU

# === Network rate limits ===
NET_MIN_RATE_MBIT=1
NET_MAX_RATE_MBIT=800               # Conservative below 1 Gbps

# === Network fallback (adaptive Oracle protection) ===
NET_ACTIVATION=adaptive             # Smart activation: adaptive, always, off
# NET_FALLBACK_START_PCT=19.0       # Activate below this CPU P95 (default)
# NET_FALLBACK_STOP_PCT=23.0        # Deactivate above this CPU P95 (default)
# NET_FALLBACK_DEBOUNCE_SEC=30      # Minimum time between state changes (default)
# NET_FALLBACK_MIN_ON_SEC=60        # Minimum active duration (default)
# NET_FALLBACK_MIN_OFF_SEC=30       # Minimum inactive duration (default)