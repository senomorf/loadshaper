# VM.Standard.E2.2.Micro (2 vCPU, 2GB RAM, 50 Mbps) - MTU 9000 Optimized
# Conservative settings for shared tenancy E2 with jumbo frames (MTU 9000)

# === Targets (conservative for shared E2) ===
# Oracle reclaims VMs when ALL metrics are BELOW 20% (95th percentile over 7 days)
# E2 shapes: memory targeting disabled, CPU and network must stay above 20%
CPU_P95_SETPOINT=25.0               # Conservative P95 target for shared tenancy
CPU_P95_TARGET_MIN=22.0             # Minimum P95 target (must stay >20%)
CPU_P95_TARGET_MAX=28.0             # Maximum P95 target (efficiency ceiling)
CPU_P95_EXCEEDANCE_TARGET=6.5       # Target % of high-intensity slots
MEM_TARGET_PCT=0                    # Disabled - E2 shapes don't have memory reclamation
NET_TARGET_PCT=25                   # 50 Mbps cap (~12.5 Mbps target)

# === Safety stop thresholds ===
CPU_STOP_PCT=75                     # Conservative for shared resources
MEM_STOP_PCT=85                     # Safer with limited RAM
NET_STOP_PCT=40                     # Conservative for 50 Mbps cap

# === Control behavior ===
CONTROL_PERIOD_SEC=10               # Slower response for stability
AVG_WINDOW_SEC=600                  # Longer window for smoother control
HYSTERESIS_PCT=8
JITTER_PCT=20                       # Higher jitter for shared environment
JITTER_PERIOD_SEC=10

# === Load average monitoring ===
LOAD_THRESHOLD=0.6                  # Higher for dual vCPU
LOAD_RESUME_THRESHOLD=0.4
LOAD_CHECK_ENABLED=true

# === Memory safety ===
MEM_MIN_FREE_MB=384                 # More conservative with 2GB total
MEM_STEP_MB=64                      # Moderate steps with 2GB RAM

# === Network configuration (MTU 9000 optimized) ===
NET_MODE=client
NET_PROTOCOL=udp
NET_PEERS=8.8.8.8,1.1.1.1,9.9.9.9
NET_PORT=15201
NET_BURST_SEC=5                     # Shorter bursts work better with jumbo frames
NET_IDLE_SEC=15                     # Longer idle for less aggressive behavior
NET_PACKET_SIZE=8900                # Optimized for MTU 9000 (30-50% CPU reduction)

# === Network sensing ===
NET_SENSE_MODE=container
NET_IFACE_INNER=eth0
NET_LINK_MBIT=50                    # 50 Mbps cap for E2.2.Micro

# === Network rate limits ===
NET_MIN_RATE_MBIT=0.5
NET_MAX_RATE_MBIT=40                # Conservative below 50 Mbps cap